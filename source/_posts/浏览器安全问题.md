浏览器安全

主要分为三大块——web页面安全、浏览器网络安全、浏览器系统安全。

如果Web页面没有安全策略，那么Web世界会是什么样子的？回收非常开放的，任何资源都可以直接进入，网站可以加载并执行其他网站的资源，这回产生信息泄露，恶意篡改数据等问题。针对这种情况，Web页面安全策略中的核心策略是同源策略。



两个URL拥有相同的协议（HTTP OR HTTPS）、相同的域名、相同的端口，则这两个URL是同源的，如下所示：

```
https://time.geekbang.org/?category=1
https://time.geekbang.org/?category=0
```

同源策略带来了极大安全性的同时也限制了Web的自由，为此引入了CSP策略，CSP的核心思想是让服务器决定浏览器能够加载哪些资源，让服务器决定浏览器是否能够执行内联JavaScript代码。通过这些手段就可以大大减少 XSS 攻击。

引入了跨域资源共享（CORS），使用该机制可以进行跨域访问控制，从而使跨域数据传输得以安全进行。

XSS攻击全称是Cross Site Scripting，翻译过来就是“跨站脚本”。黑客往HTML文件中或者DOM中注入恶意脚本，从而在用户浏览页面时利用注入的恶意脚本来进行攻击。

XSS攻击分为存储型XSS攻击，黑客通过站点漏洞将而已的JavaScript代码提交到网络数据库中，当用户请求含有该JavaScript脚本的页面时就会被进行攻击。反射型XSS工具，而已JavaScript脚本属于用户发送给网站请求中的一部分，随后网站又将而已JavaScript脚本返回给用户，当该脚本在用户页面被执行时就会受到攻击。另外需要注意的是，Web 服务器不会存储反射型 XSS 攻击的恶意脚本，这是和存储型 XSS 攻击不同的地方。基于DOM的XSS攻击。黑客通过各种手段将恶意脚本注入用户的页面中，比如通过网络劫持在页面传输过程中修改 HTML 页面的内容，这种劫持类型很多，有通过 WiFi 路由器劫持的，有通过本地恶意软件来劫持的，它们的共同点是在 Web 资源传输过程或者在用户使用页面的过程中修改 Web 页面的数据。

如何组织XSS攻击

1.服务器对输入脚本进行过滤或转码。

2.充分利用CSP。

3.使用HttpOnly属性。

除了XSS攻击还有CSRF攻击

CSRF 英文全称是 Cross-site request forgery，所以又称为“跨站请求伪造”，是指黑客引诱用户打开黑客的网站，在黑客的网站中，利用用户的登录状态发起的跨站请求。简单来讲，**CSRF 攻击就是黑客利用了用户的登录状态，并通过第三方的站点来做一些坏事**

和 XSS 不同的是，CSRF 攻击不需要将恶意代码注入用户的页面，仅仅是利用服务器的漏洞和用户的登录状态来实施攻击。

发起CSRF攻击的三个必要条件：

- 第一个，目标站点一定要有 CSRF 漏洞；
- 第二个，用户要登录过目标站点，并且在浏览器上保持有该站点的登录状态；
- 第三个，需要用户打开一个第三方站点，可以是黑客的站点，也可以是一些论坛。

具体的防范措施如下所示：

1.充分利用好Cookie的SameSite属性

2.验证请求的来源站点，由于 CSRF 攻击大多来自于第三方站点，因此服务器可以禁止来自第三方站点的请求。

3.使用CSRF Token来验证和防范。
